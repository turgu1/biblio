# Docker Compose Configuration Example
# 
# SETUP INSTRUCTIONS:
# 1. Copy this file to `docker-compose.yml`
# 2. Update the CALIBRE_LIBRARIES_PATH below to point to your Calibre libraries directory
# 3. Do not commit `docker-compose.yml` to version control (add it to .gitignore)

version: '3.8'

services:
  biblio:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: biblio
    ports:
      - "8080:8080"
    environment:
      - RUST_LOG=info
    volumes:
      # ⚠️ IMPORTANT: Update this path to your Calibre libraries location
      # Examples:
      #   Linux/Mac:   /home/username/calibre-libraries
      #   Windows:     C:/Users/username/calibre-libraries
      # The path should point to the directory containing your Calibre library folders
      - /path/to/your/calibre-libraries:/calibre-libraries:ro
      
      # Mount the config file (should be created from config.rs.example)
      - ./src/config.rs:/app/config.rs:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 5s
